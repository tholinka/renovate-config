{
	$schema: 'https://docs.renovatebot.com/renovate-schema.json',
	customManagers: [
		{
			customType: 'regex',
			description: 'Process annotated dependencies',
			managerFilePatterns: [
				'/\\.env(?:\\.j2)?$/',
				'/\\.sh(?:\\.j2)?$/',
				'/\\.yaml(?:\\.j2)?$/',
			],
			matchStrings: [
				// # renovate: datasource=github-releases depName=foo/bar
				// foobar_version: v1.0.0
				// # renovate: datasource=docker depName=ghcr.io/foo/bar
				// FOOBAR_VERSION=v1.0.0
				'datasource=(?<datasource>\\S+) depName=(?<depName>\\S+)\\n.+(:\\s|=)(&\\S+\\s)?(?<currentValue>\\S+)',
			],
			datasourceTemplate: '{{#if datasource}}{{{datasource}}}{{else}}github-releases{{/if}}',
		},
		{
			customType: 'regex',
			description: 'Process raw GitHub URLs',
			managerFilePatterns: [
				'/\\.env(?:\\.j2)?$/',
				'/\\.sh(?:\\.j2)?$/',
				'/\\.yaml(?:\\.j2)?$/',
			],
			matchStrings: [
				// https://github.com/rancher/system-upgrade-controller/releases/download/v0.13.2/crd.yaml
				'https:\\/\\/github.com\\/(?<depName>\\S+?\\/\\S+?)\\/releases\\/download\\/(?<currentValue>(v|\\d)\\S+?)\\/\\S+',
				// https://raw.githubusercontent.com/external-secrets/external-secrets/v0.9.11/docs/snippets/dashboard.json
				'https:\\/\\/raw.githubusercontent.com\\/(?<depName>\\S+?\\/\\S+?)\\/(?<currentValue>(v|\\d)\\S+?)\\/\\S+',
			],
			datasourceTemplate: 'github-releases',
		},
		{
			customType: 'regex',
			description: 'Process OCI dependencies',
			managerFilePatterns: [
				'/\\.yaml(?:\\.j2)?$/',
			],
			matchStrings: [
				'oci://(?<depName>[^:]+):(?<currentValue>\\S+)',
			],
			datasourceTemplate: 'docker',
		},
	],
}
